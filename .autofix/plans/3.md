# Issue 3: Resource leakage in SubprocessClaudeBackend.query()

## What the issue is and where

In `libs/mngr/imbue/mngr/cli/ask.py`, the `SubprocessClaudeBackend.query()` method
is a generator that creates a subprocess via `subprocess.Popen`. If the generator is
not fully consumed (e.g., due to an exception during iteration), the subprocess is
never killed or waited on because `process.wait()` is only called after the stdout
iteration loop completes.

## Why it is a problem

If the generator is abandoned mid-iteration (e.g., the caller raises an exception),
the claude subprocess may continue running as an orphan or become a zombie process
after it finishes. While Python's garbage collector will eventually close the generator
and clean up the temporary directory, the subprocess itself has no cleanup guarantee.

## Planned fix

Wrap the subprocess usage in a try/finally block that ensures the process is
terminated and waited on if the generator exits early. Use `process.terminate()`
followed by `process.wait()` in the finally block to ensure proper cleanup.

Specifically:
1. Add a try/finally around the stdout iteration and post-iteration code
2. In the finally block, kill the process if it hasn't finished and wait for it

## Risks or edge cases

- Need to be careful not to double-wait or kill an already-finished process.
- The `process.kill()` call should use `terminate()` first for graceful shutdown.
- The error-raising code after `process.wait()` needs to still work correctly.
