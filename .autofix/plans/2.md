# Issue 2: Abstraction violation - _as_host cast in api/provision.py

## What the issue is and where

`api/provision.py` contains a function `_as_host` that casts `OnlineHostInterface` to the concrete `Host` class to access `get_agent_env_path()`. This method was renamed from `_get_agent_env_path` to `get_agent_env_path` (removing the underscore prefix) specifically for this use, but it was kept on the concrete `Host` class instead of being added to the interface.

## Why it is a problem

1. The API layer should work against interfaces, not concrete implementations.
2. The `_as_host` function raises `TypeError` directly, which violates the style guide (only `NotImplementedError` is exempt from the "no bare built-in exceptions" rule).
3. This pattern makes the code less testable and harder to extend with alternative host implementations.

## Planned fix

1. Add `get_agent_env_path` as an abstract method on `OnlineHostInterface` (or `HostInterface`).
2. Remove the `_as_host` helper from `api/provision.py`.
3. Call `host.get_agent_env_path(agent)` directly in `provision_agent`.
4. Remove the `from imbue.mngr.hosts.host import Host` import from `api/provision.py`.

## Risks

Need to check if there are other implementations of `OnlineHostInterface` that would need to implement this method. Looking at the codebase, `Host` is the main implementation. There may be test doubles that need updating.
